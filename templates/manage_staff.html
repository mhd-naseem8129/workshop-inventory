{% extends "base.html" %}
{% block title %}Manage Staff{% endblock %}

{% block content %}
<div class="dashboard-container">
  <div class="dashboard-card">
    <h2>👥 Manage Staff</h2>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="flash-message {{ category }}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <div class="table-container">
      <table class="styled-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Username</th>
            <th>Role</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          {% for user in users %}
          <tr>
            <td>{{ user.id }}</td>
            <td>{{ user.username }}</td>
            <td>
              {% if user.role == 'admin' %}
                <span class="role-badge admin-badge">Admin</span>
              {% else %}
                <span class="role-badge staff-badge">Staff</span>
              {% endif %}
            </td>
            <td>
              {% if user.role != 'admin' %}
                <a href="{{ url_for('delete_user', user_id=user.id) }}" class="delete-link" onclick="return confirm('Delete this user?');">🗑️ Delete</a>
              {% else %}
                <span class="no-delete">Not Allowed</span>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
